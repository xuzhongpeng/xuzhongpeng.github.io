(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{318:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"http://jsshou.cn/blog/coding/%E4%BD%BF%E7%94%A8git_hooks%E5%BA%93%E5%8A%A9%E5%8A%9BFlutter%E5%9B%A2%E9%98%9F%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("随着Flutter 2.0的发布，越来越多的公司和个人都在尝试使用Flutter来编写性能优异、跨平台、渲染一致性好的App。当然，在追求效率的同时，也不要忘了给你的代码添加更多严谨的限制，来保证代码的质量。今天我给大家推荐一个插件，用于给提交代码到Github或者GitLab时，在本地使用dart语言，即可限制提交代码的质量。")]),s._v(" "),a("h2",{attrs:{id:"git-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hooks","aria-hidden":"true"}},[s._v("#")]),s._v(" Git Hooks")]),s._v(" "),a("p",[a("code",[s._v("Git Hooks")]),s._v("是什么，"),a("code",[s._v("Hooks")]),s._v("顾名思义，就是钩子。它在Git中的作用就是在我们通过"),a("code",[s._v("git")]),s._v("命令操作仓库或者添加项目文件时，运行一些脚本，脚本通过即可完成事件，如果失败就被终止事件。"),a("a",{attrs:{href:"https://git-scm.com/docs/githooks.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1),s._v("是官方定义的所有钩子，有兴趣的可以一一查看。比如我们在"),a("code",[s._v(".git/hooks/")]),s._v("下新建了一个"),a("code",[s._v("pre-commit")]),s._v("文件，并输入以下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'文件正在提交'")]),s._v("\nexit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后我们在命令行中执行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'提交信息'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后我们就会在命令行看到"),a("code",[s._v("文件正在提交")]),s._v("，并且文件最后没有提交到本地仓库，因为上面我exit了。")]),s._v(" "),a("p",[s._v("这样，我们就可以在这个文件中写一些校验，比如通过"),a("code",[s._v("dartanalyzer")]),s._v("查看本地项目语法是否有语法问题。")]),s._v(" "),a("h2",{attrs:{id:"git-hooks-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hooks-2","aria-hidden":"true"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://pub.dev/packages/git_hooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("git_hooks"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这是一个"),a("code",[s._v("Dart")]),s._v("命令行插件，也是一个Dart插件。我们看到上面使用"),a("code",[s._v("shell")]),s._v("脚本来写校验，它存在一些问题：")]),s._v(" "),a("ul",[a("li",[s._v("每个人的"),a("code",[s._v(".git")]),s._v("文件夹是不通过版本管理的，所以一个人第一次拉了代码，在"),a("code",[s._v(".git/hooks")]),s._v("文件夹下是不会存在能运行的hooks文件的")]),s._v(" "),a("li",[s._v("shell脚本比较生涩难写，上手难度高")])]),s._v(" "),a("p",[a("code",[s._v("git_hooks")]),s._v("库就是为了解决上面问题。它的作用就是能通过命令生成所有"),a("code",[s._v("hooks")]),s._v("，然后在我们通过"),a("code",[s._v("git")]),s._v("命令提交代码时，可以通过dart来进行提交前或者提交信息的校验。它让我们程序员可以忽略hooks文件存在，在dart代码中实现对所有钩子的操作。")]),s._v(" "),a("p",[s._v("这里我们定一个我们能看懂的术语")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("hooks文件")]),s._v("：指在"),a("code",[s._v(".git/hooks")]),s._v("文件夹下生成的钩子文件\n"),a("code",[s._v("dart钩子文件")]),s._v("：指在项目中生成的使用dart语言来操作"),a("code",[s._v("hooks文件")]),s._v("的dart文件")])]),s._v(" "),a("p",[s._v("我们可以通过下面命令来安装它，安装它前请保证你的dart已经安装且已经配置了环境变量，还要保证你的 dart 版本大于 2.1.0")]),s._v(" "),a("p",[s._v("运行命令"),a("code",[s._v("dart --version")]),s._v("查看dart版本号")]),s._v(" "),a("p",[s._v("然后运行"),a("code",[s._v("pub global activate git_hooks")]),s._v("即可全局安装"),a("code",[s._v("git_hooks")]),s._v("命令")]),s._v(" "),a("h2",{attrs:{id:"创建hooks项目文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建hooks项目文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建hooks项目文件")]),s._v(" "),a("p",[s._v("当我们打开一个拥有git版本管理的项目（在项目中可看到"),a("code",[s._v(".git")]),s._v("文件夹）")]),s._v(" "),a("p",[s._v("在项目中的"),a("code",[s._v("pubspec.yaml")]),s._v("文件中添加")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dev_dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("git_hooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ^0.1.5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("创建"),a("code",[s._v("hooks文件")]),s._v("和"),a("code",[s._v("dart钩子文件")]),s._v("的命令是：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("git_hooks create "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("targetFileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("targetFileName指的是"),a("code",[s._v("dart钩子文件")]),s._v("，它可以是项目中任何位置，比如在根目录下的"),a("code",[s._v("git_hooks.dart")]),s._v("文件（这也是如果此参数不传默认\b会创建的文件）")])]),s._v(" "),a("p",[s._v("那我们来执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("git_hooks create git_hooks.dart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果输出")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create files...                        \nAll files wrote successful!\n0.2s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("那说明我们已经创建成功。我们来检查一下文件是否生成成功，查看"),a("code",[s._v(".git/hooks")]),s._v("文件下是否有多个文件例如"),a("code",[s._v("pre-commit")]),s._v(","),a("code",[s._v("pre-push")]),s._v("等等，查看根目录下是否已生成"),a("code",[s._v("git_hooks.dart")]),s._v("文件")]),s._v(" "),a("p",[s._v("打开"),a("code",[s._v("git_hooks.dart")]),s._v("文件会看到如下")]),s._v(" "),a("div",{staticClass:"language-dart line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'package:git_hooks/git_hooks.dart'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// import 'dart:io';")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("List arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ignore: omit_local_variable_types")]),s._v("\n  Map"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Git"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" UserBackFun"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" params "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Git"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" commitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    Git"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("preCommit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" preCommit\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  GitHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nFuture"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bool"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("commitMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// String rootDir = Directory.current.path;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// String commitMsg = Utils.getCommitEditMsg();")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// if (commitMsg.startsWith('fix:')) {")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   return true; // you can return true let commit go")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// } else")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   return false;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nFuture"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bool"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("preCommit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// try {")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   ProcessResult result = await Process.run('dartanalyzer', ['bin']);")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   print(result.stdout);")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   if (result.exitCode != 0) return false;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// } catch (e) {")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   return false;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[s._v("解释：")]),s._v(" "),a("ul",[a("li",[s._v("main方法下的params是一个Map，是我们想要自定义的钩子集合，每个钩子对应下面具体的函数")]),s._v(" "),a("li",[s._v("GitHooks.call 是固定写法，库的内部会执行钩子函数并校验")]),s._v(" "),a("li",[s._v("commitMsg函数是一个例子，当执行git的commit-msg脚本时，会执行此函数，如果返回false，会终止git操作")])]),s._v(" "),a("p",[s._v("我们尝试把注释打开")]),s._v(" "),a("div",{staticClass:"language-dart line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[s._v("Future"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bool"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("commitMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" commitMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCommitEditMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("commitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("startsWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fix:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// you can return true let commit go")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'you should add `fix` in the commit message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("然后在项目路径的命令行下执行:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" git_hooks.dart\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'提交信息'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("脚本输出如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("you should add `fix` in the commit message\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("并且文件没有被提交到本地仓库。")]),s._v(" "),a("p",[s._v("大功告成！")]),s._v(" "),a("h2",{attrs:{id:"删除所有hooks文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除所有hooks文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除所有"),a("code",[s._v("hooks文件")])]),s._v(" "),a("p",[s._v("当我们有一天被自己写的钩子折磨，不想再用此校验，我们有两个方式来删除钩子")]),s._v(" "),a("ol",[a("li",[s._v("删除"),a("code",[s._v(".git/hooks")]),s._v("文件夹，注意是hooks文件夹而不是"),a("code",[s._v(".git")]),s._v("文件夹")]),s._v(" "),a("li",[s._v("通过命令"),a("code",[s._v("git_hooks uninstall")]),s._v("来删除")])]),s._v(" "),a("h2",{attrs:{id:"其它钩子的枚举"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它钩子的枚举","aria-hidden":"true"}},[s._v("#")]),s._v(" 其它钩子的枚举")]),s._v(" "),a("p",[s._v("你可以通过下面的枚举，添加更多的钩子操作")]),s._v(" "),a("div",{staticClass:"language-dart line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" Git "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  applypatchMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preApplypatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postApplypatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preCommit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  prepareCommitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  commitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postCommit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preRebase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postCheckout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postMerge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  prePush"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preReceive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postReceive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postUpdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pushToCheckout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preAutoGc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  postRewrite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  sendemailValidate\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("具体含义可以参考"),a("a",{attrs:{href:"https://git-scm.com/docs/githooks.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("git官方文档")]),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"结语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结语","aria-hidden":"true"}},[s._v("#")]),s._v(" 结语")]),s._v(" "),a("p",[s._v("上面是我的一个例子，当然我们可以使用该工具做更多的事情，比如使用"),a("code",[s._v("dartanalyzer")]),s._v("检查代码质量，使用"),a("code",[s._v("dartfmt")]),s._v("来检查代码文件格式是否对齐等等。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://pub.dev/packages/git_hooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("pub仓库地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/xuzhongpeng/git_hooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("github地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://git-scm.com/docs/githooks.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("git hooks 官方文档"),a("OutboundLink")],1)])])},[],!1,null,null,null);t.default=e.exports}}]);