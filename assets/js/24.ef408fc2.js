(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{307:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("本篇会作为一个系列，原文传送门：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://jsshou.cn/blog/canvas/canvas%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flutter canvas学习之基础知识"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://jsshou.cn/blog/canvas/canvas%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%BB%98%E5%9B%BE%E7%AF%87.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flutter canvas学习之绘图篇"),s("OutboundLink")],1)])]),t._v(" "),s("blockquote",[s("p",[t._v("基于Flutter版本: 2.0.3")])]),t._v(" "),s("h2",{attrs:{id:"开篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开篇","aria-hidden":"true"}},[t._v("#")]),t._v(" 开篇")]),t._v(" "),s("p",[t._v("Flutter现在已经是移动端跨端方向非常优秀的解决方案，在阿里、字节、微店等公司，它都是一个比较重要的技术方案。目前来说除了某些场景下它还存在的一些性能问题，还有缺乏好的动态化方案，其它问题基本都已经有了好的解决方式。")]),t._v(" "),s("p",[t._v("canvas最早是由Apple Inc.提出的，在Mac OS X webkit中创建控制板组件使用，狭义上的canvas一词本身指HTML中的canvas标签。canvas本身英文译为『画布』，广义上它在计算机领域里指的是所有使用画布的来绘制UI这种方式。在Android和iOS它都有类似的实现。")]),t._v(" "),s("p",[t._v("使用过Flutter的人都应该知道，Flutter是通过Skia来自行渲染UI界面的，Skia其实就是一个复杂的canvas，因为它的大部分API和设计理念跟我们所知道的canvas类似，你们可以点击"),s("a",{attrs:{href:"https://skia.org/docs/user/api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("查看Skia文档。它可以绘制任何2d图形，在Android和iOS中Skia底层都是通过OpenGL来渲染的。")]),t._v(" "),s("p",[t._v("作为一个『自绘性』渲染引擎，Flutter Framework提供了很多定义好的组件，还专门给Android和iOS提供了不同风格的"),s("code",[t._v("Material")]),t._v("、"),s("code",[t._v("Cupertino")]),t._v("组件。设计出这些组件本身，就是提供一个性能更好的渲染架构，让Flutter开发者能够用很小的学习成本也能进入到Flutter的开发。其实整个"),s("code",[t._v("Flutter Framework")]),t._v("层，都是建立在一套"),s("code",[t._v("canvas")]),t._v("绘制系统之上的(底层就是Skia)。只有掌握了"),s("code",[t._v("canvas")]),t._v("，才能更加深入理解Flutter的绘制流程。")]),t._v(" "),s("p",[t._v("为了统一Flutter的开发方式，Flutter也提供了"),s("code",[t._v("CustomPaint")]),t._v("组件来赋予Flutter开发的自绘性，它能让我们面对复杂的设计稿，也能绘制出相应的效果，同时也无需我们过多关注渲染时机及性能开销等问题。")]),t._v(" "),s("p",[t._v("本篇我先介绍使用"),s("code",[t._v("CustomPaint")]),t._v("的一些基本概念")]),t._v(" "),s("h2",{attrs:{id:"画板坐标系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#画板坐标系","aria-hidden":"true"}},[t._v("#")]),t._v(" 画板坐标系")]),t._v(" "),s("p",[t._v("canvas是2d绘制引擎，所以它的绘制是建立在一个基本的坐标系中的")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/map_coordinate_system.png",alt:"坐标系"}})]),t._v(" "),s("p",[t._v("如果将整个手机屏幕作为画板，Flutter将会从屏幕最左上角作为起点，向右是x轴，向左是y轴。")]),t._v(" "),s("h2",{attrs:{id:"custompaint组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custompaint组件","aria-hidden":"true"}},[t._v("#")]),t._v(" CustomPaint组件")]),t._v(" "),s("p",[t._v("我们看看CustomPaint构造函数：")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CustomPaint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("painter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foregroundPainter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zero"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isComplex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("willChange "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Widget"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("ul",[s("li",[t._v("painter:绘制的对象，是一个"),s("code",[t._v("CustomPainter")]),t._v("。它的绘制是在child之前。如果设置了child，该painter绘制的内容会被覆盖。")]),t._v(" "),s("li",[t._v("foregroundPainter:绘制的对象，是一个"),s("code",[t._v("CustomPainter")]),t._v("。它的绘制是在child之后。如果设置了child，该painter绘制的内容会覆盖child。")]),t._v(" "),s("li",[t._v("size: 画板大小，如果定义了child，则会以child的尺寸为准")]),t._v(" "),s("li",[t._v("isComplex: 默认值是false，定义绘制内容是否复杂，如果为true，会对canvas的绘制进行一些必要的缓存来优化性能")]),t._v(" "),s("li",[t._v("willChange: 默认值是false，配合isComplex使用，控制组件是否在下一帧需要重绘")]),t._v(" "),s("li",[t._v("child: 子节点，可以不设置")])]),t._v(" "),s("h2",{attrs:{id:"custompainter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custompainter","aria-hidden":"true"}},[t._v("#")]),t._v(" CustomPainter")]),t._v(" "),s("p",[s("code",[t._v("CustomPainter")]),t._v("是一个抽象类，其构造函数如下")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CustomPainter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Listenable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" repaint "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("repaint: 是一个"),s("code",[t._v("Listenable")]),t._v("，一般用于动画时，传入一个监听来控制canvas组件的重绘")])]),t._v(" "),s("h3",{attrs:{id:"void-paint-canvas-canvas-size-size"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#void-paint-canvas-canvas-size-size","aria-hidden":"true"}},[t._v("#")]),t._v(" void paint(Canvas canvas, Size size)")]),t._v(" "),s("p",[t._v("这个是我们定义painter时必须实现的方法，其中canvas就是提供出我们绘制的核心，size是告诉我们画板的大小（通过CustomPaint的size或者child确定）")]),t._v(" "),s("h3",{attrs:{id:"bool-shouldrepaint-covariant-custompainter-olddelegate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bool-shouldrepaint-covariant-custompainter-olddelegate","aria-hidden":"true"}},[t._v("#")]),t._v(" bool shouldRepaint(covariant CustomPainter oldDelegate)")]),t._v(" "),s("p",[t._v("返回 true 才会进行重绘，否则就只会绘制一次。你可以通过一些条件判断来决定是否每次绘制，这样能够节约系统资源。(注：有时候不管这里返回的是false还是true，外面的变化也能导致重新绘制，这里为什么是这样，后面的文章会给出解释)")]),t._v(" "),s("h2",{attrs:{id:"paint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#paint","aria-hidden":"true"}},[t._v("#")]),t._v(" Paint")]),t._v(" "),s("p",[t._v("canvas提供了画板，Paint就提供了一支笔，我们可以用不同Paint在同一个canvas中进行绘制。")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("Paint paint "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Paint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isAntiAlias "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Colors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pink\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blendMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BlendMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colorDodge\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeWidth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PaintingStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("Paint类提供了很多属性，上面只是一些常用属性，下面介绍它的所有属性")]),t._v(" "),s("ul",[s("li",[t._v("isAntiAlias: 是否抗锯齿")]),t._v(" "),s("li",[t._v("color: 画笔颜色")]),t._v(" "),s("li",[t._v("strokeWidth: 画笔宽度")]),t._v(" "),s("li",[t._v("style: 样式\n"),s("ul",[s("li",[t._v("PaintingStyle.fill 默认 填充")]),t._v(" "),s("li",[t._v("PaintingStyle.stroke 线")])])]),t._v(" "),s("li",[t._v("strokeCap: 定义画笔端点形状\n"),s("ul",[s("li",[t._v("StrokeCap.butt 无形状(默认)")]),t._v(" "),s("li",[t._v("StrokeCap.round 圆形")]),t._v(" "),s("li",[t._v("StrokeCap.square 正方形")])])]),t._v(" "),s("li",[t._v("strokeJoin: 定义线段交接时的形状\n"),s("ol",[s("li",[t._v("StrokeJoin.miter 默认，当两条线段夹角小于30°时，"),s("code",[t._v("StrokeJoin.miter")]),t._v("将会变成"),s("code",[t._v("StrokeJoin.bevel")])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/strokeCap_miter.png",alt:"miter"}}),t._v("\n2. StrokeJoin.bevel")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/strokeCap_bevel.png",alt:"bevel"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("StrokeJoin.round")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/strokeCap_round.png",alt:"round"}})]),t._v(" "),s("ul",[s("li",[t._v("strokeMiterLimit: 当"),s("code",[t._v("strokeJoin")]),t._v("为"),s("code",[t._v("StrokeJoin.miter")]),t._v("时且"),s("code",[t._v("style")]),t._v("为"),s("code",[t._v("PaintingStyle.stroke")]),t._v("有效，用来设置连接线的长度，一般可用"),s("code",[t._v("strokeJoin")]),t._v("来替换")]),t._v(" "),s("li",[t._v("imageFilter: 设置模糊度\n"),s("ol",[s("li",[t._v("ImageFilter.blur({double sigmaX = 0.0, double sigmaY = 0.0, TileMode tileMode = TileMode.clamp}): sigmaX与sigmaY在0~10之间，数值越大越模糊")]),t._v(" "),s("li",[t._v("ImageFilter.matrix 使用matrix来创建模糊度")]),t._v(" "),s("li",[t._v("ImageFilter.compose 组合两个ImageFilter")])])]),t._v(" "),s("li",[t._v("invertColors: 反转画笔颜色（跟设置的color有关）")]),t._v(" "),s("li",[t._v("blendMode: 混合模式，两个形状混合时使用的模式，具体可参考"),s("a",{attrs:{href:"https://api.flutter.dev/flutter/dart-ui/BlendMode-class.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("blendMode"),s("OutboundLink")],1),t._v("，默认为"),s("code",[t._v("BlendMode.srcOver")])]),t._v(" "),s("li",[t._v("shader: 着色器")]),t._v(" "),s("li",[t._v("maskFilter: 模糊蒙版滤镜，比如绘制一些阴影效果或者艺术字等")]),t._v(" "),s("li",[t._v("filterQuality: 设置滤镜（如"),s("code",[t._v("maskFilter")]),t._v("或者"),s("code",[t._v("image")]),t._v("）的质量")]),t._v(" "),s("li",[t._v("colorFilter: 彩色矩阵滤色器，可以通过设置此属性改变画笔颜色如黑白色")])]),t._v(" "),s("h2",{attrs:{id:"canvas与绘制无关api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas与绘制无关api","aria-hidden":"true"}},[t._v("#")]),t._v(" Canvas与绘制无关API")]),t._v(" "),s("h3",{attrs:{id:"save"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#save","aria-hidden":"true"}},[t._v("#")]),t._v(" save")]),t._v(" "),s("p",[s("code",[t._v("save")]),t._v("操作会保存此前的所有绘制内容和canvas状态。在调用该函数之后的绘制操作和变换操作，会重新记录。当你调用"),s("code",[t._v("restore()")]),t._v("之后，会把"),s("code",[t._v("save")]),t._v("到"),s("code",[t._v("restore")]),t._v("之间所进行的操作与之前的内容进行合并。\n下面看一个例子")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("Paint paint "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Paint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Colors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("red\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PaintingStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stroke\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeWidth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPath "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("double x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" double y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Path path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("moveTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rotate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" pi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("我使用一个函数画了三个形状一样的图形，只是它们的位置不一样，然后在第一个图形后面使用了"),s("code",[t._v("rotate")]),t._v("进行旋转，当没有使用save时，下面两个图形都会发生旋转\n"),s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/no_save.png",alt:""}}),t._v("\n当我使用save时")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("Paint paint "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Paint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Colors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("red\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PaintingStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stroke\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeWidth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPath "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("double x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" double y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Path path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("moveTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rotate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" pi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/save.png",alt:""}})]),t._v(" "),s("p",[t._v("看到区别了吧，最后绘制的图形是没有跟随上面部分旋转的。使用save方法后面必须跟一个"),s("code",[t._v("restore")]),t._v("，否则会抛出异常（这也很好理解，save的功能就是划出一块区域进行一些操作，所以这一块区域必须是闭合的）。")]),t._v(" "),s("h3",{attrs:{id:"savelayer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#savelayer","aria-hidden":"true"}},[t._v("#")]),t._v(" saveLayer")]),t._v(" "),s("p",[s("code",[t._v("saveLayer")]),t._v("的功能跟"),s("code",[t._v("save")]),t._v("类似，不过也有一点区别，"),s("code",[t._v("saveLayer")]),t._v("会创建一个新的图层来进行绘制。它有以下特点：")]),t._v(" "),s("ul",[s("li",[t._v("因为是创建的新的图层，所以我们设置的"),s("code",[t._v("Paint")]),t._v("上的"),s("code",[t._v("blendMode")]),t._v("属性会应用到两个图层之间")]),t._v(" "),s("li",[t._v("创建图层时需要传入一个绘制区域，所有的绘制只会在这个区域中，超出区域会被隐藏")]),t._v(" "),s("li",[t._v("因为是创建图层，所以会占用更多内存，有一些性能开销")]),t._v(" "),s("li",[t._v("跟"),s("code",[t._v("save")]),t._v("一样，它后面也必须跟一个"),s("code",[t._v("restore")])])]),t._v(" "),s("h3",{attrs:{id:"restore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restore","aria-hidden":"true"}},[t._v("#")]),t._v(" restore")]),t._v(" "),s("p",[t._v("刚刚已经说过，调用了"),s("code",[t._v("save")]),t._v("或者"),s("code",[t._v("saveLayer")]),t._v("之后必须调用"),s("code",[t._v("restore")]),t._v("，需要说一点的是，它是可以嵌套的，举一个例子：")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// start 1 save")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do some thing")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// start 2 save")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do some thing")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end 2 save")]),t._v("\ncanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end 1 save")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"getsavecount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getsavecount","aria-hidden":"true"}},[t._v("#")]),t._v(" getSaveCount")]),t._v(" "),s("p",[t._v("通过此获取当前位置调用save多少次，最开始是1，当调用一个"),s("code",[t._v("save")]),t._v("或者"),s("code",[t._v("saveLayer")]),t._v("后"),s("code",[t._v("+1")]),t._v("，遇到restore后"),s("code",[t._v("-1")])]),t._v(" "),s("h2",{attrs:{id:"角度问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#角度问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 角度问题")]),t._v(" "),s("p",[t._v("Flutter中的角度是用double表示的，Flutter里面提供了pi来计算角度，公式是：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1度 = pi / 180\n90度 = 90 * (pi /180)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("在Flutter中，一般传入参数叫"),s("code",[t._v("startAngle")]),t._v("的表示开始的位置，位置表示如下\n"),s("img",{attrs:{src:"https://vnode-1253495453.cos.ap-nanjing.myqcloud.com/angle.png",alt:"angle"}})]),t._v(" "),s("p",[s("code",[t._v("sweepAngle")]),t._v("表示圆弧大小")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("本篇文章介绍了我们在使用canvas前的一些需要掌握的知识，后续会介绍canvas的一些绘制能力，如有兴趣，请关注"),s("a",{attrs:{href:"http://jsshou.cn/blog/canvas/canvas%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("本篇文章原地址"),s("OutboundLink")],1),t._v("，后面会继续更新。")])])},[],!1,null,null,null);a.default=e.exports}}]);